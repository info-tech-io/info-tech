# Технический план MVP: Архитектура "Хаб и спицы"

Этот документ описывает техническую стратегию для создания MVP (Minimum Viable Product) проекта `info-tech.io`. Мы используем фреймворк для генерации статических сайтов Hugo и архитектурный подход "Хаб и спицы" (Hub and Spoke) для решения проблемы с ограничениями темы и обеспечения гибкости.

## 1. Концепция

Мы строим не один монолитный сайт, а **федерацию независимых сайтов**, объединенных общим стилем и навигацией.

*   **Хаб (Hub):** Основной сайт `info-tech.io`. Это наша витрина, лендинг, который знакомит с проектом, содержит общие страницы ("Манифест", "О нас") и предоставляет каталог-ссылок на все учебные модули.
*   **Спицы (Spokes):** Каждый учебный модуль (например, `linux.info-tech.io`, `git.info-tech.io`). Это отдельный, независимый сайт, сгенерированный Hugo, который содержит уроки конкретного курса.

## 2. Структура репозиториев

Для реализации этой архитектуры мы будем использовать несколько репозиториев в нашей GitHub Organization.

#### Публичный репозиторий

*   **`info-tech-content` (Public)**
    *   **Назначение:** Единственный источник правды для всего нашего образовательного контента.
    *   **Лицензия:** Apache 2.0.
    *   **Структура:** Контент для каждого модуля хранится в своей директории.
        ```
        info-tech-content/
        ├── linux-for-beginners/
        │   ├── 01-introduction.md
        │   └── _index.md
        ├── git-for-beginners/
        │   └── ...
        └── ...
        ```

#### Приватные репозитории

*   **`info-tech-landing` (Private)**
    *   **Назначение:** Hugo-проект для нашего основного сайт��-хаба (`info-tech.io`).
    *   **Контент:** Страницы "О нас", "Манифест", и, самое главное, список-ссылок на все учебные модули.

*   **`info-tech-module-template` (Private, шаблон)**
    *   **Назначение:** Это наш **золотой стандарт** для всех учебных модулей.
    *   **Содержимое:**
        *   Настроенная тема Hugo.
        *   Базовый `hugo.toml` с настройками.
        *   Пустая папка `content`.
    *   **Использование:** Мы создаем копию этого репозитория каждый раз, когда начинаем работу над новым курсом.

*   **`info-tech-module-linux` (Private, пример модуля)**
    *   **Назначение:** Hugo-проект для модуля по Linux (`linux.info-tech.io`).
    *   **Создание:** Является копией `info-tech-module-template`.
    *   **Ключевая особенность:** Контент для этого модуля подключается из публичного репозитория `info-tech-content` с помощью **Git Submodule**.

## 3. Рабочий процесс (Workflow)

#### Связывание контента и движка

В каждом репозитории-модуле (например, `info-tech-module-linux`) мы подключаем репозиторий с контентом как субмодуль:

```bash
# Выполняется в корне репозитория info-tech-module-linux
git submodule add https://github.com/YourOrganization/info-tech-content.git content
```

Затем, в файле `hugo.toml` этого модуля, мы указываем Hugo, какую именно папку из всего репозитория с контентом нужно использовать для сборки этого конкретного сайта:

```toml
# в /hugo.toml репозитория info-tech-module-linux
contentDir = "content/linux-for-beginners" 
```

#### Сборка и деплой на VDS

1.  На нашем VDS мы клонируем все репозитории-модули и лендинг.
2.  Создаем скрипт для автоматической сборки, который:
    *   Для каждого проекта (`landing`, `module-linux`, `module-git`...):
        *   Обновляет код из Git: `git pull`.
        *   Обновляет контент: `git submodule update --remote`.
        *   Запускает сбо��ку: `hugo`.
    *   Готовые сайты складываются в соответствующие папки (например, `/var/www/html/landing`, `/var/www/html/linux`).

## 4. Конфигурация Nginx

Nginx выступает в роли диспетчера, который по имени хоста определяет, какой сайт нужно показать пользователю.

```nginx
# /etc/nginx/sites-available/info-tech.conf

# 1. Сайт-хаб (лендинг)
server {
    listen 80;
    server_name info-tech.io www.info-tech.io;
    root /var/www/html/landing;
    index index.html;
    # ... другие настройки, включая SSL
}

# 2. Сайт-модуль (спица)
server {
    listen 80;
    server_name linux.info-tech.io;
    root /var/www/html/linux;
    index index.html;
    # ... другие настройки, включая SSL
}

# ... и так далее для каждого модуля.
```

Эта архитектура обеспечивает идеальный баланс между скоростью разработки, гибкостью и масштабируемостью для нашего MVP.
